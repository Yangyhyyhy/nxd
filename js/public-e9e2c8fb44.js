var isCache=!0;try{mp.stop(),Utility.keyConvert()}catch(t){console.log(t)}var env=evm.getStbBrowser();function cookie(t,e){if(null==e||"string"!=typeof e)return evm.cookie(t)?evm.cookie(t):void 0;evm.cookie(t,e)}var cmsIndex=function(){var i={},t=i.config={cookieSwitch:!0,cookieKey:"cmsIndex",mockData:{key:"[mdata]",dir:"../source/mockData"},debug:!1},s=(i.localData={indexSource:"[mdata]/index.js"},i.modules=[]);if(moduleId=0,module=null,moduleGuid=0,moduleCount=-1,i.addModule=function(){return moduleCount+=1},i.moduleGuid=function(t){return"number"==typeof t&&(moduleGuid=t),moduleGuid},t.cookieSwitch&&t.cookieKey){var e=cookie(t.cookieKey);if(e&&0<(e=e.split(",")).length){var a=i.moduleCookie=e[0].split(".");if(e[1]){i.viewportCookie=a;a=i.moduleCookie=e[1].split(".")}if(e[2])i.parentCookie=e[2].split(".")}evm.cutCookie(t.cookieKey)}return i.addListener=function(){evm.controller.subscribe({type:1,method:"add",callback:i.grabEvent,context:i})},i.removeListener=function(){evm.controller.subscribe({type:1,method:"remove",callback:i.grabEvent,context:i})},i.grabEvent=function(t){var e=0;return module&&module.grabEvent&&(e=module.grabEvent(t)||0),e},i.module=function(t){return s[t]&&(module=s[t].module||null),module},i.handle=function(t){var e=i;if(s[moduleId].map&&"number"==typeof s[moduleId].map[t])return moduleId=s[moduleId].map[t],e.module(moduleId)},i.paint=function(){var t=i;return modelInit(),t.addListener(),t},i.run=function(){var t=i;i.module(moduleId);return cmsIndex.handle("right"),evm.on(document,env.stb&&"iPanel"==env.stb?"irkeypress":"keydown",evm.controller,evm),t.paint(),t},i}();function GetDatas(t,e,i){http(API_URL.baseURL+API_URL[t],e,i)}function http(t,e,s){$.ajax({type:"get",dataType:"jsonp",data:e,jsonp:"callback",url:t,success:function(t){s(null,t)},error:function(t,e,i){s(i)}})}function hardwareOpt(){var t="";try{t=hardware.STB.serialNumber}catch(t){}return t}!function(a){var t=function(t,e){if("string"==typeof t)return new Evm.uber.init(t.replace(/^\s*|\s$/g,""),e)},e=(a=a).location.pathname.split("/");switch(e[e.length-1]){case"shop.html":case"integral.html":$.cookie("TV_CST_NAME")&&"null"!=$.cookie("TV_CST_NAME")||(a.location.href="../pages/login.html")}t.userLogin=function(){var t=parseInt(1e4*Math.random()),s=hex_md5(hardware.smartCard.serialNumber+t),e={sign:s,rand:t,smartcardno:hardware.smartCard.serialNumber};http(API_URL.loginURL+"home/auth/getCardnoCode",e,function(t,e){var i={code:e.data.code,cardno:hardware.STB.serialNumber,sign:s};http(API_URL.loginURL+"home/auth/getAccessToken",i,function(t,e){"803"==e.code||"803"==e.code?a.location.href="../pages/login.html":$.cookie("TV_CST_TOKEN",e.data.access_token,{path:"/"})})})},t.UserMess=function(){var t="",e=$.cookie("TV_CST_NAME"),i=$.cookie("TV_CST_HEADIMG");return t+='  <div id="login"><div id="userName">'+(e&&"null"!=e?e:"请登录")+"</div>",i&&"null"!=i?(t+='<div class=" head-img user-img">',t+="<img src="+i+">",t+="</div>"):t+='<div class="head-img"></div>',t+="</div>",$("body").append(t),e&&"null"!=e?1:0},t.IndexOpt=function(t,e,i){var s=$("#"+t).children("."+e);console.log(s[i],i);var a=$(".head-img");a.removeClass("header-active");for(var o=0;o<s.length;o++)s[o].className=e;-1==i?a.addClass("header-active"):s[i]&&(s[i].className=s[i].className+" active")},t.PromptMsg=function(t,e){var i="",s=t||"请输入提示内容",a=e||2e3;0==$("#pormptMsg").length?(i='<div class="pormpt-div" id="pormptMsg">'+s+"</div>",$("body").append(i)):($("#pormptMsg").html(s),$("#pormptMsg").attr("style","display:block")),setTimeout(function(){$("#pormptMsg").fadeOut()},a)},t.GetParam=function(t){var e=t||"id";if(paramValue="",isFound=!1,0==a.location.search.indexOf("?")&&1<a.location.search.indexOf("="))for(arrSource=decodeURI(a.location.search).substring(1,a.location.search.length).split("&"),i=0;i<arrSource.length&&!isFound;)0<arrSource[i].indexOf("=")&&arrSource[i].split("=")[0].toLowerCase()==e.toLowerCase()&&(paramValue=arrSource[i].split("=")[1],isFound=!0),i++;return paramValue},t.GetKey=function(t){var e="";switch(t){case keymap.Enrich.UP:case keymap.iPanel.UP:case keymap.DVN.UP:e="up";break;case keymap.Enrich.DOWN:case keymap.iPanel.DOWN:case keymap.DVN.DOWN:e="down";break;case keymap.Enrich.LEFT:case keymap.iPanel.LEFT:case keymap.DVN.LEFT:e="backwards";break;case keymap.Enrich.RIGHT:case keymap.iPanel.RIGHT:case keymap.DVN.RIGHT:e="forwards";break;case keymap.SELECT:case keymap.SELECT2:e="enter";break;case keymap.Enrich.BACK:case keymap.iPanel.BACK:case keymap.DVN.BACK:e="back";break;case keymap.Inspur.EXIT:case keymap.iPanel.EXIT:case 0:a.location.href="index.html"}return json={keyState:e,isBlock:0}},t.structure=function(t){str='<div class="crumbsTitle">'+t+"</div>",$("body").append(str)},t.articleMove=function(t,e,i,s){var a=s||20,o=(e=document.getElementById(e),document.getElementById(i));clearInterval(articleRun),articleRun=setInterval(function(){"down"==t?o.scrollHeight-e.scrollTop<=e.offsetHeight-5?clearInterval(articleRun):e.scrollTop++:0==e.scrollTop?clearInterval(articleRun):e.scrollTop--},a)},(t.ListOperation=function(t){this.direction=void 0!==t.direction&&null!==t.direction&&""!==t.direction&&t.direction?t.direction:"",this.structure=void 0!==t.structure&&null!==t.structure&&""!==t.structure&&t.structure?t.structure:1,this.type=void 0!==t.type&&null!==t.type&&""!==t.type&&t.type?parseInt(t.type):1,this.isLike=!(void 0===t.isLike||null===t.isLike||""===t.isLike||!t.isLike)&&t.isLike,this.status=void 0!==t.status&&null!==t.status&&""!==t.status&&t.status?t.status:1,this.key=t.key,this.nowPage=t.nowPage?parseInt(t.nowPage):1,this.totalPage=t.totalPage?parseInt(t.totalPage):1,this.pageSize=t.pageSize?parseInt(t.pageSize):1,this.length=t.length?parseInt(t.length):1,this.index=parseInt(t.index),this.rowHeight=t.rowHeight?parseInt(t.rowHeight):2,this.isMenu=t.isMenu||0}).prototype={init:function(){this.Operation()},operation:function(){var t="",e="";switch(this.type){case 1:switch(this.key){case"backwards":this.isLike&&"0"==this.status?this.status="1":1<this.nowPage?(this.nowPage--,t="previous"):""!=this.direction&&1==this.structure&&(e=this.direction);break;case"forwards":this.status="1"==this.status&&this.isLike?"0":"1","1"==this.status&&this.nowPage!=this.totalPage&&(this.nowPage++,t="next");break;case"up":"1"==this.status&&(0==this.index&&1<this.nowPage?(this.nowPage--,t="previous"):0<this.index?this.index--:0==this.index&&1==this.nowPage&&1==this.isMenu?e="menu":2==this.structure&&0==this.index&&1==this.nowPage&&(e=this.direction));break;case"down":"1"==this.status&&++this.index>=this.length&&this.nowPage!=this.totalPage&&(this.nowPage++,t="next"),this.index>=this.length&&(this.index=this.length-1);break;case"pageUp":1<this.nowPage&&(this.nowPage--,t="previous");break;case"pageDown":this.nowPage!=this.totalPage&&(this.nowPage++,t="next")}break;case 2:switch(this.key){case"backwards":1==this.nowPage&&0==this.index&&1==this.structure?e=this.direction:this.nowPage<=this.totalPage&&1<this.nowPage&&0==this.index?(this.nowPage--,t="previous"):0<this.index&&this.index--;break;case"forwards":"1"==this.status&&++this.index>=this.length&&this.nowPage!=this.totalPage&&(this.nowPage++,t="next"),this.index>=this.length&&(this.index=this.length-1);break;case"up":1==this.nowPage&&2==this.structure&&"1"==this.status?e=this.direction:this.isLike&&"0"==this.status?this.status="1":1<this.nowPage&&(this.nowPage--,t="previous");break;case"down":this.isLike&&"1"==this.status?this.status="0":"1"==this.status&&this.nowPage!=this.totalPage&&(this.nowPage++,t="next");break;case"pageUp":1<this.nowPage&&(this.nowPage--,t="previous");break;case"pageDown":this.nowPage!=this.totalPage&&(this.nowPage++,t="next")}break;case 3:var i=this.pageSize/this.rowHeight;switch(this.key){case"backwards":""!=this.direction&&1==this.nowPage&&0==this.index&&1==this.structure?e=this.direction:1<this.nowPage&&0==this.index?(this.nowPage--,t="previous"):0==this.index&&1==this.nowPage&&1==this.isMenu&&2==this.structure?e="menu":0<this.index&&this.index--;break;case"forwards":++this.index>=this.length&&this.nowPage!=this.totalPage?(this.nowPage++,t="next"):this.nowPage==this.totalPage&&this.index==this.length&&this.index--;break;case"up":this.isLike&&"0"==this.status?this.status="1":""!=this.direction&&this.index<i&&1==this.nowPage&&2==this.structure?e=this.direction:0<=this.index&&this.index<i&&1<this.nowPage?(this.nowPage--,t="previous"):this.index>=i&&(this.index-=i);break;case"down":this.status="1"==this.status&&this.isLike?"0":"1","1"==this.status&&(this.index>=this.pageSize-i&&this.nowPage!=this.totalPage?(this.nowPage++,t="next"):this.index<this.pageSize-i&&(this.index+=i),this.index>=this.length&&(this.index=this.length-1));break;case"pageUp":1<this.nowPage&&(this.nowPage--,t="previous");break;case"pageDown":this.nowPage!=this.totalPage&&(this.nowPage++,t="next")}}return{direction:e,index:this.index,status:this.status,nowPage:this.nowPage,position:t}}},(t.CookieOpt=function(t){this.json=t||{}}).prototype={cookieName:"TV__CST_"+a.location.pathname,clean:function(){$.cookie(this.cookieName,null)},setOpt:function(){if(this.cookieTv=$.cookie(this.cookieName),this.cookieTv&&"null"!=this.cookieTv)$.cookie(this.cookieName,null);else{var t="";for(var e in this.json)t+="&"+e+"="+this.json[e];$.cookie(this.cookieName,t,{expires:1})}},getOpt:function(){if(this.cookieTv=$.cookie(this.cookieName),this.cookieTv){var t=this.cookieTv.split("&");t.shift();for(var e={},i=0;i<t.length;i++){var s=t[i].split("=");e[s[0]]=parseInt(s[1])}return $.cookie(this.cookieName,null),e}}},"object"==typeof a&&(a.TV=t)}(window),function(){var t=function(){this.flag=0,this.id=0,this.tjapi=API_URL.loginURL,this.tpe=1,this.platf=0,this.detailId=0,this.locationUrl=window.location.href};t.prototype={init:function(){this.urlOpt()},urlOpt:function(){if(this.arr=this.locationUrl.split("?"),0<this.arr.length){var t;t=this.arr[0].split("/"),this.name=t[t.length-1],2==this.arr.length&&(this.id=TV.GetParam("id")?TV.GetParam("id"):0)}this.postview()},postview:function(){switch(this.name){case"":this.platf=99;break;case"theoretical.html":this.platf=1;break;case"education.html":this.platf=2;break;case"culture.html":this.platf=3;break;case"science.html":this.platf=4;break;case"volunteer.html":this.platf=6;break;case"sports.html":this.platf=5;break;case"infoListActivity.html":this.tpe=2;break;case"play.html":case"articleDetail.html":case"wordDetail.html":this.detailId=this.id;break;default:this.platf=0}if(0==this.flag){var t=$.cookie("TV_CST_TOKEN"),e={device:"tv",cardNo:hardwareOpt(),platf:this.platf,tpe:this.tpe,category:this.id,id:this.detailId,access_token:t};http(this.tjapi+"/api/v2/commons/postview",e,function(t,e){console.log(e)})}}},(new t).init()}();